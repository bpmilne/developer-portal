<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Dwolla Developers | Dwolla</title>

    <link href="../../assets/css/header-footer.css?v=110.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/style.css?v=110.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/jquery-ui.css?v=110.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/jquery.qtip.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/sh/shCore.css?v=110.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/sh/shCoreEclipse.css?v=110.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/highlight.css?v=110.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,400,600' rel='stylesheet' type='text/css'>

    <meta http-equiv="Content-Language" content="en-us">
    <meta name="description" content="Dwolla Developers's Portal">
    <meta name="keywords" content="dwolla, api, dwolla api, money api, dwolla example code, dwolla examples, dwolla sample code, dwolla documentation, dwolla api documentation">
    <meta name="robots" content="all">

    <link rel="shortcut icon" href="../../assets/images/favicon.ico" type="image/x-icon" />

	  <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>

  </head>

  <body>
    <!-- Google Tag Manager -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K7TKTN" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer','GTM-K7TKTN');</script>
    <!-- End Google Tag Manager -->

    <div class="header">
      <div class="inner-wrap">
        <h1 class="logo-main"><a href="https://www.dwolla.com">Dwolla</a></h1>

          <ul class="nav nav-primary">
            <li><a href="http://blog.dwolla.com">Blog</a></li>
            <li><a href="http://help.dwolla.com">Support</a></li>
            <li><a href="https://www.dwolla.com/applications">Log in</a></li>
            <li><a href="https://www.dwolla.com/applications/create" class="btn orange">Get API Key</a></li>
          </ul>
      </div>
    </div>

    <div id="wrap">
      <div class="container">
          
<h2><span>API /</span> Off-Site Gateway</h2>
<h4>Dwolla's hosted checkout flow</h4>


<div id="docs" class="doc_page">
	<div class="sidebar">
	<div class="well" style="padding: 8px 0;">
		<ul class="nav nav-list">
			<li class="nav-header">
				Developer Newsletter 
			</li>
			<li>
			<!-- Begin MailChimp Signup Form -->
			<div id="mc_embed_signup">
			<form action="https://dwolla.us3.list-manage.com/subscribe/post?u=bd010d6cd015c558a27b4a232&amp;id=4e85ae585c" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
			<div id="mc_embed_signup_scroll">

			<div class="mc-field-group">
			<input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Enter your e-mail!">
			</div>
			<div id="mce-responses" class="clear">
			<div class="response" id="mce-error-response" style="display:none"></div>
			<div class="response" id="mce-success-response" style="display:none"></div>
			</div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
			<div style="position: absolute; left: -5000px;"><input type="text" name="b_bd010d6cd015c558a27b4a232_4e85ae585c" tabindex="-1" value=""></div>
			<div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn orange"></div>
			</div>
			</form>
			</div>
			<script type='text/javascript' src='https://s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script><script type='text/javascript'>(function($) {window.fnames = new Array(); window.ftypes = new Array();fnames[0]='EMAIL';ftypes[0]='email';fnames[1]='FNAME';ftypes[1]='text';fnames[2]='LNAME';ftypes[2]='text';}(jQuery));var $mcj = jQuery.noConflict(true);</script>
			<!--End mc_embed_signup-->
			</li>
		</ul>
	</div>
	<div class="well" style="padding: 8px 0;">
		<ul class="nav nav-list">
			<li class="nav-header">
				Topics
			</li>
			<li 
>
				<a href="../../index.html">
					<i class="icon-screenshot"></i>
					Getting Started
				</a>
			</li>
			<li 
>
				<a href="../docs/users/account.html" target="_blank">
					<i class="icon-list-alt"></i>
					API Documentation
				</a>
			</li>
			<li>
				<a href="http://status.dwolla.com" target="_blank">
				    <i class="icon-fire"></i>
				    API Status
				</a>
			</li>
			<li 
>
				<a href="http://discuss.dwolla.com/category/api-support" target="_blank">
					<i class="icon-comment"></i>
					Help / Forum
				</a>
			</li>
			<li>
				<a href="https://www.dwolla.com/tos/dev" target="_blank">
					<i class="icon-check"></i>
					Developer TOS
				</a>
			</li>

			<li class="nav-header">
				Guides
			</li>
			<li 
>
				<a href="guides/white_label.html">
					<i class="icon-check"></i>
					White Label: Transfer funds
				</a>
			</li>
			<li 
>
				<a href="guides/create_application.html">
					<i class="icon-check"></i>
					Generate API Credentials
				</a>
			</li>
			<li 
>
				<a href="guides/receiving_money.html">
					<i class="icon-check"></i>
					Accepting Payments
				</a>
			</li>
			<li 
>
				<a href="guides/sending_money.html">
					<i class="icon-check"></i>
					Sending Money
				</a>
			</li>
			<li 
>
				<a href="guides/masspay.html">
					<i class="icon-check"></i>
					Sending Batch Payments
				</a>
			</li>
			<li 
>
				<a href="guides/facilitator_fee.html">
					<i class="icon-check"></i>
					Setting Facilitator Fees
				</a>
			</li>
			<li 
>
				<a href="guides/offsite_gateway.html">
					<i class="icon-check"></i>
					Off-Site Gateway Checkout
				</a>
			</li>
			<li 
>
				<a href="guides/sandbox.html">
					<i class="icon-check"></i>
					Sandbox: Getting Started
				</a>
			</li>
			<li 
>
				<a href="guides/using_webhooks.html">
					<i class="icon-check"></i>
					Using Webhooks
				</a>
			</li>

			<li class="nav-header">
				Integration Options
			</li>
			<li class="active"
>
				<a href="gateway.html">
					<i class="icon-shopping-cart"></i>
					Off-Site Gateway
				</a>
			</li>
			<li 
>
				<a href="auth.html">
					<i class="icon-user"></i>
					OAuth + REST API
				</a>
			</li>

			<li class="nav-header">
				Reference
			</li>
			<li 
>
				<a href="guides/direct_limitations.html">
					<i class="icon-download-alt"></i>
					Direct Account Limitatons
				</a>
			</li>
			<li 
>
				<a href="guides/correlate_transactions.html">
					<i class="icon-download-alt"></i>
					Correlate Transaction IDs
				</a>
			</li>
			<li 
>
				<a href="guides/oauth_account_creation.html">
					<i class="icon-bell"></i>
					OAuth Account Creation
				</a>
			</li>
			<li 
>
				<a href="../docs/gateway/direct.html">
					<i class="icon-arrow-right"></i>
					Dwolla Direct
				</a>
			</li>
			<li 
>
				<a href="sandbox.html">
					<i class="icon-hdd"></i>
					Sandbox
				</a>
			</li>
			
			<li class="nav-header">
				Tools
			</li>
			<li 
>
				<a href="sandbox/admin.html">
					<i class="icon-asterisk"></i>
					Sandbox Admin
				</a>
			</li>
			<li 
>
				<a href="testing.html">
					<i class="icon-road"></i>
					Reflector Account
				</a>
			</li>
			<li 
>
				<a href="../token.html">
					<i class="icon-pencil"></i>
					Token Generator
				</a>
			</li>

			<li>
				<a href="../docs/users/account.html">Looking for API Docs? &raquo;</a>
			</li>

		</ul>
	</div>
</div>


	<div class="content">
		<p>The Off-Site Gateway API is a way to seamlessly pay for goods or services online utilizing Dwolla's API. Using a Dwolla-provided checkout experience, customers can authenticate and authorize payment of a purchase order utilizing Dwolla as the processing platform. Once complete, the user is sent back to the merchant's URL. There are two different ways to initiate an Off-Site Gateway checkout session:</p>

		<ul>
			<li><p>Submit a form that contains the checkout details (products, amount, total, etc) directly from the client to the Dwolla server. <a href="gateway.html#submit-directly" class="hashlink">Read about <b>submitting directly &raquo;</b></a></p></li>
			<li><p>Create a checkout session by communicating the checkout information from your server to the Dwolla server directly. <a href="gateway.html#server-to-server" class="hashlink">Read about <b> server-to-server  &raquo;</b></a></p></li>
		</ul>

		<p>By flagging the <code>checkoutWithApi</code> parameter to <code>false</code> or <code>true</code>, respectively, the Gateway can be configured to handle payment in two different ways:</p>
		<ul>
			<li><p>Pay Immediately:  the payment is automatically sent immediately after the user clicks “Place Order” then the user is redirected back to the merchant site with query string information about the checkout and the resulting payment.  <a href="gateway.html#pay-immediately" class="hashlink">Read about <b>Pay Immediately &raquo;</b></a></p></li>
			<li><p>Authorize Now - Pay Later: the user authorizes the payment on the Gateway and clicks “Continue” to be redirected back to the merchant site, but no payment is placed yet.  From that time forward, the merchant will have up to 15 minutes to submit a POST to complete the checkout and send the payment. <a href="gateway.html#pay-later" class="hashlink">Read about <b>Pay Later &raquo;</b></a></p></li>
		</ul>

		<p>Dwolla Direct (or previously known as Guest Checkout), when enabled via the <code>allowGuestCheckout</code> parameter, lets users pay directly from their bank account without having a pre-existing Dwolla account. <a href="../docs/gateway/direct.html">Read about <b>Dwolla Direct &raquo;</b></a></p>

		<p class="section_header pad_top">User Experience</p>
<div class="section" style="display: none" id="ux">
	<p>The Off-Site Gateway provides a mobile friendly checkout experience, hosted by Dwolla.  Here's a typical flow of the Off-Site Gateway:</p>
	<ol>
		<li>
			<p>Customer initiates a checkout on the merchant site.</p>
			<img src="../../assets/images/dev/ux/gateway_ux_1.png" alt="UX Step 1" />
		</li>
		
		<li>
			<p>Customer is taken to Dwolla to complete the checkout.</p>
			<img src="../../assets/images/dev/gateway/checkout.png" alt="UX Step 2" />
		</li>
		
		<li>
			<p>Customer gets redirected back to the merchant's website.</p>
			<img src="../../assets/images/dev/ux/gateway_ux_3.png" alt="UX Step 3" />
		</li>
	</ol>
</div>


		<div class="big_header">Initiating a Checkout Session</div>

		<p class="section_header pad_top">Submit Directly</p>
<div class="section" style="display: none" id="submit-directly">
	<p class="subsection_header">Generating the Form</p>
	<p>Submit a form directly from the client (browser) to the Off-Site Gateway with all checkout information.</p>
	
	<pre class="syntax_highlight"> https://www.dwolla.com/payment/pay</pre>

	<p class="caption">Request Parameters:</p>
	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>&nbsp;</th>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>key</td>
				<td>Application key</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>signature</td>
				<td>HMAC-SHA1 hexadecimal hash of the application key, timestamp, and order ID.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>timestamp</td>
				<td>Timestamp of the generated purchase order. Represented as the UNIX epoch time.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>callback</td>
				<td>URL to POST the transaction response to after the user authorizes the purchase. If not provided, will default to the Payment Callback URL set for the consumer application. If no default found, results in postback error. Only applicable if <code>checkoutWithApi</code> is false.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>redirect</td>
				<td>URL to return the user to after they authorize or cancel the purchase. If not provided, will default to the Payment Redirect URL set for the consumer application. If no default found, results in error.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>assumeCosts</td>
				<td>Deprecated</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>allowFundingSources</td>
				<td>Flag to <code>true</code> to allow guest checkout and bank-funded payments.  <a href="../docs/gateway/direct.html">Guest Checkout</a> enables customers to pay directly from their bank accounts, without needing an existing Dwolla account. </td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>checkoutWithApi</td>
				<td>Set to <code>true</code> to use the <a href="gateway.html#pay-later" class="hashlink">Authorize Now / Pay Later</a> flow.  Defaults to <code>false</code>, which enables the <a href="gateway.html#pay-now" class="hashlink">Pay Now</a> flow.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>orderId</td>
				<td>Optional string to identify the transaction.  Max 255 characters.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>test</td>
				<td>Flag if purchase order is for testing purposes only. Does not affect account balances and no emails are sent. The transaction ID will always be 1 in the responses.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>destinationId</td>
				<td>Dwolla ID of the Dwolla account receiving the funds. Format will always match "812-xxx-xxxx".</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>amount</td>
				<td>Amount of the order. Must be $0.01 or more.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>shipping</td>
				<td>Shipping total for the order. Must be $0.00 or more.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>tax</td>
				<td>Tax applied the order. Must be $0.00 or more.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>facilitatorAmount</td>
				<td>Amount of the facilitator fee to override. Only applicable if the facilitator fee feature is enabled. If set to 0, facilitator fee is disabled for transaction. Cannot exceed 25% of the total.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>notes</td>
				<td>Note to attach to the transaction. Limited to 250 characters.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>metadata</td>
				<td>Optional. A JSON object of maximum 10 key-value pairs with which to store metadata in. Keys and values must be strings of max length 255.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>name</td>
				<td>Name of the item. Must be 100 characters or less.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>description</td>
				<td>Description of the item. Must be 200 characters or less.</td>
			</tr>
		</tbody>
	</table>

	<p class="subsection_header">Generating the Signature</p>

	<p>HMAC-SHA1 hexadecimal hash generated from the ampersand delimited text of the consumer key, <a href="http://en.wikipedia.org/wiki/Unix_time">Unix timestamp</a> (number of seconds since the Unix Epoch), and orderId, even if an order ID is not provided. The text is then hashed using the consumer secret for the application as the hash key. The signature must be unique per request, so a new timestamp will need to be provided for each request.</p>

	<p class="caption">HMAC-SHA1 generation example with PHP:</p>
<pre class="syntax_highlight">
&lt;?php
$key 		= "YOUR_APPLICATION_KEY";
$secret 	= "YOUR_APPLICATION_SECRET";
$timestamp 	= time(); // example: 1390408833
$order_id 	= 1;

$signature 	= hash_hmac('sha1', "{$key}&{$timestamp}&{$order_id}", $secret);
?&gt;
</pre>

	<p class="caption">Request example:</p>
<pre class="syntax_highlight">
&lt;form accept-charset=&quot;UTF-8&quot; action=&quot;https://www.dwolla.com/payment/pay&quot; 
method=&quot;post&quot;&gt;

&lt;input id=&quot;key&quot; name=&quot;key&quot; type=&quot;hidden&quot; value=&quot;abcdefg&quot; /&gt;
&lt;input id=&quot;signature&quot; name=&quot;signature&quot; type=&quot;hidden&quot; value=&quot;abcd&quot; /&gt;
&lt;input id=&quot;callback&quot; name=&quot;callback&quot; type=&quot;hidden&quot; 
value=&quot;http://www.mywebsite.com/callback.aspx&quot; /&gt;
&lt;input id=&quot;redirect&quot; name=&quot;redirect&quot; type=&quot;hidden&quot; 
value=&quot;http://www.mywebsite.com/redirect.aspx&quot; /&gt;
&lt;input id=&quot;test&quot; name=&quot;test&quot; type=&quot;hidden&quot; value=&quot;true&quot; /&gt;
&lt;input id=&quot;name&quot; name=&quot;name&quot; type=&quot;hidden&quot; value=&quot;Purchase&quot; /&gt;
&lt;input id=&quot;description&quot; name=&quot;description&quot; type=&quot;hidden&quot; 
value=&quot;Description&quot; /&gt;
&lt;input id=&quot;destinationid&quot; name=&quot;destinationid&quot; type=&quot;hidden&quot; 
value=&quot;812-111-1111&quot; /&gt;
&lt;input id=&quot;amount&quot; name=&quot;amount&quot; type=&quot;hidden&quot; value=&quot;1.00&quot; /&gt;
&lt;input id=&quot;shipping&quot; name=&quot;shipping&quot; type=&quot;hidden&quot; value=&quot;0.00&quot; /&gt;
&lt;input id=&quot;tax&quot; name=&quot;tax&quot; type=&quot;hidden&quot; value=&quot;0.00&quot; /&gt;
&lt;input id=&quot;orderid&quot; name=&quot;orderid&quot; type=&quot;hidden&quot; value=&quot;188375&quot; /&gt;
&lt;input id=&quot;timestamp&quot; name=&quot;timestamp&quot; type=&quot;hidden&quot; 
value=&quot;1323302400&quot; /&gt;

&lt;button type=&quot;submit&quot;&gt;Submit Order&lt;/button&gt;
&lt;/form&gt;
</pre>

	<p class="caption">Error example:</p>
<pre class="syntax_highlight">http://www.myurl.com/redirect?error=failure&error_description=Invalid+callback+URL</pre>

	<p class="subsection_header">Error Codes</p>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Literal String</th>
        <th>Explanation</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>"Invalid timestamp."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Payment has already been generated for application, timestamp, and order ID."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Invalid application signature."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Invalid amount."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Invalid shipping value."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Invalid tax value."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Invalid facilitator amount."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Invalid test value."</td>
        <td></td>
      </tr>
    </tbody>
  </table>
</div>


		<p class="section_header pad_top">Server-to-Server Checkout Request</p>
<div class="section" style="display: none" id="server-to-server">
	<p class="subsection_header">Generating a Checkout Session</p>

	<p>The merchant website must POST a request to the Off-Site Gateway API providing a JSON formatted purchase order placed in the body of the request.  The request must contain this header: <code>Content-Type: application/json</code></p>

	<p class="caption">Request URL</p>
	<pre class="syntax_highlight">https://www.dwolla.com/oauth/rest/offsitegateway/checkouts</pre>

	<p class="caption">Legacy Request URL</p>
	<p>This is a legacy endpoint which may be deprecated in the future. Use the above endpoint instead.</p>
	<pre class="syntax_highlight">https://www.dwolla.com/payment/request</pre>
	

	<p class="caption">Request Parameters:</p>
	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>&nbsp;</th>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>client_id</td>
				<td>Application Key.  If using the legacy endpoint, this parameter is <code>Key</code> instead.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>client_secret</td>
				<td>Application Secret.  If using the legacy endpoint, this parameter is <code>Secret</code> instead.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>callback</td>
				<td>URL to POST the transaction response to after the user authorizes the purchase. If not provided, will default to the Payment Callback URL set for the consumer application. If no default found, results in postback error. Only applicable if <code>checkoutWithApi</code> is false.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>redirect</td>
				<td>URL to return the user to after they authorize or cancel the purchase. If not provided, will default to the Payment Redirect URL set for the consumer application. If no default found, results in error.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>assumeCosts</td>
				<td>Deprecated</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>checkoutWithApi</td>
				<td>Set to <code>true</code> to use the <a href="gateway.html#pay-later" class="hashlink">Authorize Now / Pay Later</a> flow.  Defaults to <code>false</code>, which enables the <a href="gateway.html#pay-now" class="hashlink">Pay Now</a> flow.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>allowFundingSources</td>
				<td>Set to <code>true</code> to allow the user to select funding sources other than Balance, such as ACH (bank account), or FiSync.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>allowGuestCheckout</td>
				<td>Flag to <code>true</code> to enable guest checkout; enabled by default.  <a href="../docs/gateway/direct.html">Guest Checkout</a> enables customers to pay directly from their bank accounts, without needing an existing Dwolla account.  Requires <code>allowFundingSources</code> to be set to <code>true</code>.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>additionalFundingSources</td>
				<td>Requires allowFundingSources to be set to <code>true</code>. Specify which funding sources are acceptable for this checkout transaction. Multiple sources may be specified in a comma delimited format. Possible values are:
				<br/><br/>
				<code>credit</code>: Display Dwolla Credit, if both the merchant and user support it<br/>
				<code>banks</code>: Display all users usable banks<br/>
				<code>fisync</code>: Display all users usable banks that are FiSync-enabled<br/>
				<code>realtime</code>: Display 'credit' and 'fisync' sources<br/>
				<code>true</code>: Display all<br/>
				<code>false</code>: Display none</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>orderId</td>
				<td>Optional string to identify the transaction. Max 255 characters.</td>
			</tr>
			<tr>
				<td>&nbsp;</td>
				<td>test</td>
				<td>Flag if purchase order is for testing purposes only. Does not affect account balances and no emails are sent. The transaction ID will always be 1 in the responses.</td>
			</tr>

			<tr>
				<td>&nbsp;</td>
				<td>profileId</td>
				<td>Optional Profile ID.  This feature allows a recipient to display a different avatar and name, to collect money on a different person/entity's behalf.  Requires special permission to use.  Contact us if you're interested!</td>
			</tr>

			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>purchaseOrder</td>
				<td>JSON object representing the purchase order instance.</td>
			</tr>

			<tr class="nested">
				<td>&nbsp;</td>
				<td>customerInfo</td>
				<td>JSON object representing the customer's proposed contact information. This information will be pre-filled and editable if Guest Checkout ("AllowFundingSources") is enabled.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>firstName</td>
				<td>Customer's first name.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>lastName</td>
				<td>Customer's last name.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>email</td>
				<td>Customer's email address.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>city</td>
				<td>Customer's city.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>state</td>
				<td>Customer's state. Must be specified in 2-characters abbr (e.g. CA for California).</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>zip</td>
				<td>Customer's zip code.</td>
			</tr>

			<tr class="nested">
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>destinationId</td>
				<td>Dwolla ID of the Dwolla account receiving the funds. Format will always match "812-xxx-xxxx".</td>
			</tr>
			<tr class="nested">
				<td>&nbsp;</td>
				<td>discount</td>
				<td>Discount applied to the order. Must be $0.00 or a negative value but absolutely no more than the total value of the order.</td>
			</tr>
			<tr class="nested">
				<td>&nbsp;</td>
				<td>shipping</td>
				<td>Shipping total for the order. Must be $0.00 or more.</td>
			</tr>
			<tr class="nested">
				<td>&nbsp;</td>
				<td>tax</td>
				<td>Tax applied the order. Must be $0.00 or more.</td>
			</tr>
			<tr class="nested">
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>total</td>
				<td>Total of the order. Must be $1.00 or more. Calculated as (item price x quantity) + tax + shipping + discount.</td>
			</tr>
			<tr class="nested">
				<td>&nbsp;</td>
				<td>facilitatorAmount</td>
				<td>Amount of the facilitator fee to override. Only applicable if the facilitator fee feature is enabled. If set to 0, facilitator fee is disabled for transaction. Cannot exceed 25% of the total.</td>
			</tr>
			<tr class="nested">
				<td>&nbsp;</td>
				<td>notes</td>
				<td>Note to attach to the transaction. Limited to 250 characters.</td>
			</tr>
			<tr class="nested">
				<td>&nbsp;</td>
				<td>metadata</td>
				<td>Optional. A JSON object of maximum 10 key-value pairs with which to store metadata in. Keys and values must be strings of max length 255.</td>
			</tr>
			<tr class="nested">
				<td>&nbsp;</td>
				<td>orderItems</td>
				<td>Array of line items for the purchase order to display to the user.  Optional; if omitted, no purchase order breakdown is shown.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>name</td>
				<td>Name of the item. Must be 100 characters or less.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>description</td>
				<td>Description of the item. Must be 200 characters or less.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>price</td>
				<td>Price of the item. Must be $0 or more.</td>
			</tr>
			<tr class="dbl_nested">
				<td>&nbsp;</td>
				<td>quantity</td>
				<td>Quantity of the item. Must be 1 or more.</td>
			</tr>
		</tbody>
	</table>

	<p class="caption">Request example:</p>
<pre class="syntax_highlight">
POST /oauth/rest/offsitegateway/checkouts
Content-Type: application/json

{
  "client_id": "JCGQXLrlfuOqdUYdTcLz3rBiCZQDRvdWIUPkw++GMuGhkem9Bo",
  "client_secret": "g7QLwvO37aN2HoKx1amekWi8a2g7AIuPbD5C/JSLqXIcDOxfTr",
  "callback": "http://www.something.com/callback",
  "redirect": "http://www.something.com/return",
  "allowGuestCheckout": "true",
  "checkoutWithApi": "false",
  "orderId": "foo123",
  "allowFundingSources": "true",
  "additionalFundingSources": "true",
  "purchaseOrder": {
        "orderItems": [
            {
                "name": "Prime Rib Sandwich", 
                "description": "A somewhat tasty non-vegetarian sandwich", 
                "quantity": "1", 
                "price": "15.00"
            }
        ],
    "destinationId": "812-740-4294",
    "total": 15.00,
    "notes": "blahhh",
    "metadata": {
        "key1": "something",
        "key2": "another thing"
    }
  }
}
</pre>

	<p class="caption">Successful response example:</p>
<pre class="syntax_highlight">
{
    "Success": true,
    "Message": "Success",
    "Response": {
        "CheckoutId": "ec2d100f-72f0-44f8-9385-5f6b018abdb6"
    }
}
</pre>

	<p class="caption">Error response example:</p>
<pre class="syntax_highlight">
{
    "Success": false,
    "Message": "Total cannot be less than $.01.",
    "Response": null
}
</pre>

	<p class="subsection_header">Checking Out</p>
	<p>The merchant's website will now need to redirect the user to the checkout endpoint providing the unique checkout ID within 5 minutes. After 5 minutes, the checkout ID will expire and a new request will need to be generated.</p>

	<pre class="syntax_highlight"> https://www.dwolla.com/payment/checkout/{CheckoutId}</pre>



	<p class="subsection_header">Error Codes</p>
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Literal String</th>
        <th>Explanation</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>"Shipping rate cannot be less than $0."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Tax cannot be less than $0."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Discount cannot be greater than $0."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Total cannot be less than $.01."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Invalid total."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Notes length is too long. Maximum of 250 character is allowed."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Price on all order items cannot be less than $0."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Quantity on all order items cannot be less than 1."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Order item name length must be between 1 and 100 characters."</td>
        <td></td>
      </tr>
      <tr>
        <td>"Order item description length must not exceed 200 characters."</td>
        <td></td>
      </tr>
    </tbody>
  </table>

  <p>Literal strings returned in the API do no include the quotation marks used above.</p>
</div>


		<div class="big_header">Checkout Flows</div>

		<p class="section_header pad_top">Pay Immediately</p>
<div class="section" style="display: none" id="pay-immediately">
	<p class="subsection_header">Overview</p>
	<p>Unlike the Pay Later flow, the checkout process is completed when the user clicks "Place Order" on the Gateway and the payment is sent immediately to the merchant.  This flow does not require any action after the user is returned from the gateway to the merchant site.</p>

	<p class="subsection_header">1. User Login</p>
	<img class="screenshot" src="../../assets/images/dev/gateway/login.png">
	<p>(a) If the user is not logged into the Dwolla network, they will be prompted to log in providing their email and password. Once the user successfully authenticates, they will be presented with the purchase order provided during the request.</p>

	<p>(b) If <a href="../docs/gateway/direct.html">Guest Checkout</a> was enabled in the request, the user will be prompted to provide their full name, email, phone number, city, state, ZIP, and bank account number and routing number before proceeding.</p>

	<p>(c) If the user clicks the 'Cancel' button rather than logging in, they're redirected to the redirect URL with an error. If no redirect parameter was provided &amp; no default Payment Redirect URL was set for the consumer application, they're redirected to dwolla.com.</p>

	<pre class="syntax_highlight"> https://www.myurl.com/redirect?checkoutId=b5840be1-fc4c-4f87-8d89-f93300257304&error=failure&error_description=User+Cancelled</pre>


	<p class="subsection_header">2. Checkout</p>
	<img class="screenshot" src="../../assets/images/dev/gateway/checkout.png">

	<p>The user will then need to provide their PIN number and click the 'Place Order' button to complete the checkout.  The payment is sent immediately to the merchant.  If there are any errors, the payment will cancel and no funds will be transferred.</p>

	<p class="subsection_header">3. Server Callback</p>
	<p>If the callback URL was provided during the request, the transaction details will be POSTed to the URL in a JSON-encoded string.  This is completely transparent to the customer.</p>

	<p class="caption">Callback parameters:</p>
	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Amount</td>
				<td>Total amount of the purchase formatted to two decimal places.</td>
			</tr>
			<tr>
				<td>CheckoutId</td>
				<td>Unique purchase order ID generated by Off-Site Gateway.</td>
			</tr>
			<tr>
				<td>ClearingDate</td>
				<td>
					Date and time in which the funds are to be cleared into the destination account.
					<br />
					<b>NOTE:</b> As of 8/4/2014 09:00 EST, ClearingDate will return a ISO-8601 formatted timestamp. <a href="https://discuss.dwolla.com/t/api-update-new-timestamp-format-for-clearingdate-parameter/401">Read more about it here. </a>
				</td>
			</tr>
			<tr>
				<td>Error</td>
				<td>Any errors that occurred during the checkout.</td>
			</tr>
			<tr>
				<td>OrderId</td>
				<td>Order ID provided during the request.</td>
			</tr>
			<tr>
				<td>Signature</td>
				<td>HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key.</td>
			</tr>
			<tr>
				<td>Status</td>
				<td>Status of the checkout session. Possible values: Completed, and Failed.</td>
			</tr>
			<tr>
				<td>TestMode</td>
				<td>Set to 'true' if purchase order is for testing purposes only, otherwise 'false'.</td>
			</tr>
			<tr>
				<td>TransactionId</td>
				<td>Dwolla transaction ID to identify the successful transaction. This is the <a href="http://dwolla.github.io/slate/#transactions">Sender's Transaction ID</a>.  If in test mode, the transaction ID has a value of 'null'.</td>
			</tr>
			<tr>
				<td>DestinationTransactionId</td>
				<td>Dwolla transaction ID to identify the successful transaction. This is the <a href="http://dwolla.github.io/slate/#transactions">Recipient's Transaction ID</a>.  If in test mode, the transaction ID has a value of 'null'.</td>
			</tr>
		</tbody>
	</table>
<pre class="syntax_highlight">
POST https://www.example.com/payment_callback HTTP/1.1
Content-Type: application/json
Content-Length: 252

{
  "Amount": 0.01,
  "OrderId": null,
  "Status": "Completed",
  "Error": null,
  "TransactionId": 5533917,
  "CheckoutId": "f9ab5085-95f4-41b1-8d1d-93f28a4cfa70",
  "Signature": "c4dd3c0b65b84c585079c8de3cc1695db32e048e",
  "TestMode": "false",
  "ClearingDate": "2014-08-05T22:59:59Z",
  "DestinationTransactionId": 5533916
}
</pre>

	<p class="caption">PHP Example of Callback Usage</p>
<pre class="syntax_highlight">
$data = json_decode(file_get_contents('php://input'));
$amount = $data->Amount
...
</pre>


	<p class="subsection_header">4. User Redirect</p>
	<img class="screenshot" src="../../assets/images/dev/gateway/paynow_complete.png">

	<p>The user will then be redirected back to the merchant's website provided by the redirect URL provided during the request.  Information regarding the checkout and resulting payment is provided to the merchant website in the form of these querystring parameters:</p>

	<p class="caption">Redirect URL parameters:</p>
	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>checkoutId</td>
				<td>Unique purchase order ID generated by Off-Site Gateway.</td>
			</tr>
			<tr>
				<td>orderId</td>
				<td>Order ID provided during the request.</td>
			</tr>
			<tr>
				<td>test</td>
				<td>Flagged to 'true' if purchase order is for testing purposes only, absent otherwise.</td>
			</tr>
			<tr>
				<td>transaction</td>
				<td>Dwolla transaction ID to identify the successful transaction. This is the <a href="http://dwolla.github.io/slate/#transactions">Sender's Transaction ID</a>.  If in test mode, the transaction ID has a value of 'null'.</td>
			</tr>
			<tr>
				<td>destinationTransaction</td>
				<td>Dwolla transaction ID to identify the successful transaction. This is the <a href="http://dwolla.github.io/slate/#transactions">Recipient's Transaction ID</a>.  If in test mode, the transaction ID has a value of 'null'.</td>
			</tr>
			<tr>
				<td>postback</td>
				<td>If the callback URL provided and the postback response completed succesfully, a value of "success" - else, "failure".</td>
			</tr>
			<tr>
				<td>amount</td>
				<td>Total amount of the purchase formatted to two decimal places.</td>
			</tr>
			<tr>
				<td>signature</td>
				<td>HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key.</td>
			</tr>
			<tr>
				<td>clearingDate</td>
				<td>
					Date and time in which the funds are to be cleared into the destination account.
					<br />
					<b>NOTE:</b> As of 8/4/2014 09:00 EST, ClearingDate will return a ISO-8601 formatted timestamp. <a href="https://discuss.dwolla.com/t/api-
					update-new-timestamp-format-for-clearingdate-parameter/401">Read more about it here. </a>
				</td>
			</tr>
			<tr>
				<td>status</td>
				<td>Status of the checkout session. Possible values: Completed, and Failed.</td>
			</tr>
		</tbody>
	</table>

	<p class="caption">Successful Redirect URL format</p>
	<pre class="syntax_highlight"> https://www.myurl.com/redirect?signature={}&orderId={}&amount={}&checkoutId={}&status={}&clearingDate={}&transaction={}&destinationTransaction={}&postback={}</pre>

	<p class="caption">Example</p>
	<pre class="syntax_highlight"> https://www.myurl.com/redirect?signature=b81868c9abce0af9458a5d8b34270223f7258cc0&orderId=&amount=0.01&checkoutId=52c6694f-c90d-4c25-81f6-505c34408f81&status=Completed&clearingDate=2014-08-05T22:52:20Z&transaction=5533883&destinationTransaction=5533882&postback=failure</pre>

	<p class="caption">Failure Redirect URL format</p>
	<pre class="syntax_highlight"> https://www.myurl.com/redirect?checkoutId={}&error=failure&error_description={}</pre>

	<p class="caption">Example</p>
	<pre class="syntax_highlight"> https://www.myurl.com/redirect?checkoutId=694e6bcb-349f-451d-bf5d-8aa16530c960&error=failure&error_description=There+are+insufficient+funds+for+this+transaction.</pre>

	<p class="subsection_header">* Dwolla's Signature</p>
	<p>In both the user redirect querystring, and the callback POST request, Dwolla includes a signature that can be used to authenticate Dwolla's server identity. The signature is an HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key. Here's an example of a signature validation in some common languages:</p>

	<div class="codeContainer">
<pre>
<code class="lang-python">
def verify_gateway_signature(proposed_signature, checkout_id, amount):
	import hmac
	import hashlib

	raw = '%s&%.2f' % (checkout_id, amount)
	signature = hmac.new(client_secret, raw, hashlib.sha1).hexdigest()

	return True if (signature == proposed_signature) else False
</code>
</pre>
<pre>
<code class="lang-php">
function verifyGatewaySignature($proposedSignature, $checkoutId, $amount) {
    $amount = number_format($amount, 2);
    $signature = hash_hmac("sha1", "{$checkoutId}&{$amount}", $apiSecret);

    return $signature == $proposedSignature;
}
</code>
</pre>

<pre>
	<code class="lang-ruby">
def self.valid_dwolla_signature?(proposed_signature, checkout_id, amount)
	require 'base64'
	require 'openssl'

	raw = "#{checkout_id}&#{amount}"
	digest  = OpenSSL::Digest::Digest.new('sha1')
	signature = OpenSSL::HMAC.hexdigest(digest, client_secret, raw)
	return (signature == proposed_signature)
end
	</code>
</pre>
</div>

</div>


		<p class="section_header pad_top">Authorize Now, Pay Later</p>
<div class="section" style="display: none" id="pay-later">
	<p class="subsection_header">Overview</p>
	<p>Similar to the industry standard “authorize-capture” payment flow offered by many payment gateways, this flow lets you get a user’s approval for a purchase and affords you the ability to send the actual payment at a later time.  This delay in processing can be useful if your system is built around the authorize-capture paradigm.</p>

	<p class="subsection_header">1. User Login</p>

	<img class="screenshot" src="../../assets/images/dev/gateway/login.png">

	<p>(a) If the user is not logged into the Dwolla network, they will be prompted to log in providing their email and password. Once the user successfully authenticates, they will be presented with the purchase order provided during the request.</p>

	<p>(b) If Guest Checkout was enabled in the request, the user will be prompted to provide their full name, email, phone number, city, state, ZIP, and bank account number and routing number before proceeding.</p>

	<p>(c) If the user clicks the 'Cancel' button rather than logging in, they're redirected to the redirect URL with an error.</p>

	<pre class="syntax_highlight"> https://www.myurl.com/redirect?checkoutId=b5840be1-fc4c-4f87-8d89-f93300257304&error=failure&error_description=User+Cancelled</pre>

	<p class="subsection_header">2. Checkout</p>
	<img class="screenshot" src="../../assets/images/dev/gateway/checkout.png">
	<p>The user then will need to provide their PIN number and select the 'Continue' button to be redirected to the merchant. No payment is placed at this time.</p>


	<p class="subsection_header">3. User Redirect</p>
	<img class="screenshot" src="../../assets/images/dev/gateway/paylater_confirm.png">

	<p>The user is redirected back to the merchant's website provided by the redirect URL provided during the request.</p>

	<p class="caption">Redirect URL parameters:</p>
	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>checkoutId</td>
				<td>Unique purchase order ID generated by Off-Site Gateway.</td>
			</tr>
			<tr>
				<td>orderId</td>
				<td>Order ID provided during the request.</td>
			</tr>
			<tr>
				<td>amount</td>
				<td>Total amount of the purchase formatted to two decimal places.</td>
			</tr>
			<tr>
				<td>signature</td>
				<td>HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key.</td>
			</tr>
			<tr>
				<td>checkoutWithApi</td>
				<td>Flagged to true</td>
			</tr>
		</tbody>
	</table>

	<p class="caption">Redirect URL format</p>
	<pre class="syntax_highlight"> https://www.myurl.com/redirect?signature={}&orderId={}&amount={}&checkoutId={}&checkoutWithApi=true</pre>

	<p class="caption">Redirect URL example</p>
	<pre class="syntax_highlight"> https://www.myurl.com/redirect?signature=77a673943088eee2860d7141f7984572f0daf78d&orderId=&amount=0.01&checkoutId=75a8cb07-f589-4602-882d-ce37d4669ce8&checkoutWithApi=true</pre>

	<p class="caption">Failure Redirect URL format</p>
	<pre class="syntax_highlight">https://www.myurl.com/redirect?checkoutId={}&error=failure&error_description={}</pre>

	<p class="caption">Failure Redirect Example</p>
	<pre class="syntax_highlight">https://www.myurl.com/redirect?checkoutId=b5840be1-fc4c-4f87-8d89-f93300257304&error=failure&error_description=User+Cancelled</pre>

	<p class="subsection_header">* Dwolla's Signature</p>
	<p>In the user redirect querystring, Dwolla includes a signature that can be used to authenticate Dwolla's server identity. The signature is an HMAC-SHA1 hexadecimal hash of the checkoutId and amount ampersand separated using the consumer secret of the application as the hash key. Here's are examples of signature validation in some common languages:</p>

<div class="codeContainer">
<pre>
<code class="lang-python">
def verify_gateway_signature(proposed_signature, checkout_id, amount):
	import hmac
	import hashlib

	raw = '%s&%.2f' % (checkout_id, amount)
	signature = hmac.new(client_secret, raw, hashlib.sha1).hexdigest()

	return True if (signature == proposed_signature) else False
</code>
</pre>
<pre>
<code class="lang-php">
function verifyGatewaySignature($proposedSignature, $checkoutId, $amount) {
    $amount = number_format($amount, 2);
    $signature = hash_hmac("sha1", "{$checkoutId}&{$amount}", $apiSecret);

    return $signature == $proposedSignature;
}
</code>
</pre>

<pre>
	<code class="lang-ruby">
def self.valid_dwolla_signature?(proposed_signature, checkout_id, amount)
	require 'base64'
	require 'openssl'

	raw = "#{checkout_id}&#{amount}"
	digest  = OpenSSL::Digest::Digest.new('sha1')
	signature = OpenSSL::HMAC.hexdigest(digest, client_secret, raw)
	return (signature == proposed_signature)
end
	</code>
</pre>
</div>

	<p class="subsection_header">4. Check Checkout Session Status</p>
	<p>Once the user has returned to the merchant, the merchant can check the status of the checkout with a GET request to:</p>

	<pre class="syntax_highlight">https://www.dwolla.com/oauth/rest/offsitegateway/checkouts/{checkoutId}?client_id={clientId}&client_secret={clientSecret}</pre>

	<p class="caption">Request Parameters:</p>
	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>&nbsp;</th>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>client_id</td>
				<td>Application Key.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>client_secret</td>
				<td>Application Secret.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>checkoutId</td>
				<td>Checkout ID</td>
			</tr>
		</tbody>
		</table>

	<p>Example Response:</p>


<pre class="syntax_highlight">
{
    "Success": true,
    "Message": "Success",
    "Response": {
        "CheckoutId": "03e5e17e-423e-4c3f-89d7-32e42dc9db41",
        "Discount": 0,
        "Shipping": 0,
        "Tax": 0,
        "Total": 1000,
        "Status": "ReadyForApiCheckout",
        "FundingSource": "Balance",
        "TransactionId": null,
        "ProfileId": null,
        "DestinationTransactionId": null,
        "OrderItems": [
            {
                "Description": "Description #1",
                "Name": "Item #1",
                "Price": 1000,
                "Quantity": 1,
                "Total": 1000
            }
        ]
    }
}
</pre>

<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>CheckoutId</td>
				<td>Unique purchase order ID generated by Off-Site Gateway.</td>
			</tr>
			<tr>
				<td>OrderId</td>
				<td>Order ID provided during the request.</td>
			</tr>
			<tr>
				<td>Discount</td>
				<td>Discount amount provided in checkout request.</td>
			</tr>
			<tr>
				<td>Shipping</td>
				<td>Shipping amount provided in checkout request.</td>
			</tr>
			<tr>
				<td>Tax</td>
				<td>Tax amount provided in checkout request</td>
			</tr>
			<tr>
				<td>Total</td>
				<td>Total amount of the purchase formatted to two decimal places.</td>
			</tr>
			<tr>
				<td>FundingSource</td>
				<td>Funding source type chosen by the customer.  If checkout on Gateway hasn't been completed yet, value will be null.  Possible values: <code>null</code>, <code>Balance</code>, <code>Credit</code>, or <code>Bank</code>.</td>
			</tr>
			<tr>
				<td>Status</td>
				<td>Status of the checkout session.  Possible values: <code>Created</code>, <code>ReadyForApiCheckout</code>, <code>Expired</code>, or <code>Completed</code>.  When status is <code>ReadyForApiCheckout</code>, merchant can send final POST to complete the checkout.</td>
			</tr>
			<tr>
				<td>OrderItems</td>
				<td>An array of <code>Item</code> objects, each describing an items's <code>Description</code>, <code>Name</code>, <code>Price</code>, and <code>Quantity</code>.</td>
			</tr>
		</tbody>
	</table>

	<p class="subsection_header">5. Payment Submission</p>
	<img class="screenshot" src="../../assets/images/dev/gateway/paynow_complete.png">

	<p>If the checkout session status is <code>ReadyForApiCheckout</code>, the merchant can finalize the checkout process and create the payment by sending a POST request to:</p>

	<pre class="syntax_highlight">https://www.dwolla.com/oauth/rest/offsitegateway/checkouts/{checkoutId}/complete</pre>

	<table class="table table-bordered table-striped">
		<thead>
			<tr>
				<th>&nbsp;</th>
				<th>Param</th>
				<th>Description</th>
			</tr>
		</thead>
		<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>client_id</td>
				<td>Application Key.</td>
			</tr>
			<tr>
				<td class="required" rel="tooltip" title="Required Parameter"><span>*</span></td>
				<td>client_secret</td>
				<td>Application Secret.</td>
			</tr>
	</table>

	<p>Example request:</p>

<pre class="syntax_highlight">
POST /oauth/rest/offsitegateway/checkouts/0e86e10f-bc87-47fc-9ad2-e4e206b9af64/complete
Content-Type: application/json

{
  "client_id": "tTQwUwrzXO9ZkVerLnc+CWefOaoP0HEdzXTlwp+XqMmFrC743e",
  "client_secret": "V0haZWt5T+685IrAYLmEsbDX29X0DjZe76IdSVqnWxLsTGOdwV"
}
</pre>

	<p>Successful response example:</p>

	<pre class="syntax_highlight">
{
    "Success": true,
    "Message": "Success",
    "Response": {
        "Amount": 1000,
        "CheckoutId": "bd3bb1db-59e6-4a7e-9ba6-129cc6eeed33",
        "ClearingDate": "",
        "OrderId": "foo",
        "TestMode": false,
        "TransactionId": 68755,
        "DestinationTransactionId": 68754
    }
}
</pre>

</div>



		<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'dwolladevelopers'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
	</div>
</div>

      </div>

      <div class="page-footer">
        <div class="inner-wrap">
          <ul>
            <li><a href="https://www.dwolla.com/about">About</a></li>
            <li><a href="http://help.dwolla.com/">Support</a></li>
            <li><a href="https://www.dwolla.com/individuals">Individuals</li>
            <li><a href="https://www.dwolla.com/businesses">Businesses</a></li>
            <li><a href="../../index.html">Developers</a></li>
            <li><a href="https://www.dwolla.com/fees">Fees</a></li>
            <li><a href="https://www.dwolla.com/security">Security</a></li>
            <li><a href="https://press.dwolla.com/">Press</a></li>
            <li><a href="https://blog.dwolla.com/">Blog</a></li>
            <li><a href="https://jobs.dwolla.com/">Careers</a></li>
          </ul>
          <p>&copy; <script>document.write(new Date().getFullYear())</script> Dwolla Inc. &nbsp;<a href="https://www.dwolla.com/privacy">Privacy</a>
           <a href="https://www.dwolla.com/legal/tos/">Legal</a>
           <a href="https://www.dwolla.com/legal/about-our-financial-institution-partner/">Dwolla, Inc. is an agent of its Financial Institution Partner(s)</a>
           </p>
        </div>
      </div>
    </div>

		<script src="../../assets/js/common.js?v=110"></script>

		
			
			
		<script src="../../assets/js/dev.js?v=110"></script>
			
		

    <!-- Chartbeat -->
		<script type="text/javascript">
		  var _sf_async_config = { uid: 22842, domain: 'developers.dwolla.com' };
		  (function() {
		    function loadChartbeat() {
		      window._sf_endpt = (new Date()).getTime();
		      var e = document.createElement('script');
		      e.setAttribute('language', 'javascript');
		      e.setAttribute('type', 'text/javascript');
		      e.setAttribute('src',
		        (("https:" == document.location.protocol) ? "https://a248.e.akamai.net/chartbeat.download.akamai.com/102508/" : "http://static.chartbeat.com/") +
		        "js/chartbeat.js");
		      document.body.appendChild(e);
		    };
		    var oldonload = window.onload;
		    window.onload = (typeof window.onload != 'function') ?
		      loadChartbeat : function() { oldonload(); loadChartbeat(); };
		  })();
		</script>

    <!-- adroll -->
    <script type="text/javascript">
    adroll_adv_id = "M574VFZAGJHU7MWRNRQZWP";
    adroll_pix_id = "3L6XRQ72VVHLJPYJWIZGCE";
    (function () {
    var oldonload = window.onload;
    window.onload = function(){
       __adroll_loaded=true;
       var scr = document.createElement("script");
       var host = (("https:" == document.location.protocol) ? "https://s.adroll.com" : "http://a.adroll.com");
       scr.setAttribute('async', 'true');
       scr.type = "text/javascript";
       scr.src = host + "/j/roundtrip.js";
       ((document.getElementsByTagName('head') || [null])[0] ||
        document.getElementsByTagName('script')[0].parentNode).appendChild(scr);
       if(oldonload){oldonload()}};
    }());
    </script>

    <!-- google analytics -->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-30404064-1', 'auto');
      ga('send', 'pageview');

    </script>

  </body>
</html>
